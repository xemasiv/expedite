{"version":3,"sources":["..\\node_modules\\serialize-javascript\\index.js","centaurus.worker.js"],"names":["ActionTypes","LOAD_SCRIPTS","REGISTER_FUNCTION","CALL_FUNCTION","LocalFunctions","send","something","postMessage","self","addEventListener","data","eval","resolve","parameter","id","resolved","reject","action","scripts","map","script","importScripts","e","console","warn","stack","key","fn","apply","parameters"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ADZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"centaurus.worker.map","sourceRoot":"..\\src","sourcesContent":["/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n'use strict';\n\n// Generate an internal UID to make the regexp pattern harder to guess.\nvar UID                 = Math.floor(Math.random() * 0x10000000000).toString(16);\nvar PLACE_HOLDER_REGEXP = new RegExp('\"@__(F|R|D)-' + UID + '-(\\\\d+)__@\"', 'g');\n\nvar IS_NATIVE_CODE_REGEXP = /\\{\\s*\\[native code\\]\\s*\\}/g;\nvar UNSAFE_CHARS_REGEXP   = /[<>\\/\\u2028\\u2029]/g;\n\n// Mapping of unsafe HTML and invalid JavaScript line terminator chars to their\n// Unicode char counterparts which are safe to use in JavaScript strings.\nvar ESCAPED_CHARS = {\n    '<'     : '\\\\u003C',\n    '>'     : '\\\\u003E',\n    '/'     : '\\\\u002F',\n    '\\u2028': '\\\\u2028',\n    '\\u2029': '\\\\u2029'\n};\n\nfunction escapeUnsafeChars(unsafeChar) {\n    return ESCAPED_CHARS[unsafeChar];\n}\n\nmodule.exports = function serialize(obj, options) {\n    options || (options = {});\n\n    // Backwards-compatibility for `space` as the second argument.\n    if (typeof options === 'number' || typeof options === 'string') {\n        options = {space: options};\n    }\n\n    var functions = [];\n    var regexps   = [];\n    var dates     = [];\n\n    // Returns placeholders for functions and regexps (identified by index)\n    // which are later replaced by their string representation.\n    function replacer(key, value) {\n        if (!value) {\n            return value;\n        }\n\n        // If the value is an object w/ a toJSON method, toJSON is called before\n        // the replacer runs, so we use this[key] to get the non-toJSONed value.\n        var origValue = this[key];\n        var type = typeof origValue;\n\n        if (type === 'object') {\n            if(origValue instanceof RegExp) {\n                return '@__R-' + UID + '-' + (regexps.push(origValue) - 1) + '__@';\n            }\n\n            if(origValue instanceof Date) {\n                return '@__D-' + UID + '-' + (dates.push(origValue) - 1) + '__@';\n            }\n        }\n\n        if (type === 'function') {\n            return '@__F-' + UID + '-' + (functions.push(origValue) - 1) + '__@';\n        }\n\n        return value;\n    }\n\n    var str;\n\n    // Creates a JSON string representation of the value.\n    // NOTE: Node 0.12 goes into slow mode with extra JSON.stringify() args.\n    if (options.isJSON && !options.space) {\n        str = JSON.stringify(obj);\n    } else {\n        str = JSON.stringify(obj, options.isJSON ? null : replacer, options.space);\n    }\n\n    // Protects against `JSON.stringify()` returning `undefined`, by serializing\n    // to the literal string: \"undefined\".\n    if (typeof str !== 'string') {\n        return String(str);\n    }\n\n    // Replace unsafe HTML and invalid JavaScript line terminator chars with\n    // their safe Unicode char counterpart. This _must_ happen before the\n    // regexps and functions are serialized and added back to the string.\n    if (options.unsafe !== true) {\n        str = str.replace(UNSAFE_CHARS_REGEXP, escapeUnsafeChars);\n    }\n\n    if (functions.length === 0 && regexps.length === 0 && dates.length === 0) {\n        return str;\n    }\n\n    // Replaces all occurrences of function, regexp and date placeholders in the\n    // JSON string with their string representations. If the original value can\n    // not be found, then `undefined` is used.\n    return str.replace(PLACE_HOLDER_REGEXP, function (match, type, valueIndex) {\n        if (type === 'D') {\n            return \"new Date(\\\"\" + dates[valueIndex].toISOString() + \"\\\")\";\n        }\n\n        if (type === 'R') {\n            return regexps[valueIndex].toString();\n        }\n\n        var fn           = functions[valueIndex];\n        var serializedFn = fn.toString();\n\n        if (IS_NATIVE_CODE_REGEXP.test(serializedFn)) {\n            throw new TypeError('Serializing native function: ' + fn.name);\n        }\n\n        return serializedFn;\n    });\n}\n","import serialize from 'serialize-javascript';\r\n\r\nconst ActionTypes = {\r\n  LOAD_SCRIPTS: 0,\r\n  REGISTER_FUNCTION: 1,\r\n  CALL_FUNCTION: 2\r\n};\r\n\r\nconst LocalFunctions = {};\r\n\r\nconst send = (something) => postMessage(serialize(something));\r\n\r\nself.addEventListener('message', ({ data }) => {\r\n  data = eval('(' + data + ')');\r\n  let resolve = (parameter) => send({\r\n    id: data.id,\r\n    resolved: true,\r\n    parameter\r\n  });\r\n  let reject = (parameter) => send({\r\n    id: data.id,\r\n    parameter\r\n  });\r\n  switch (data.action) {\r\n    case ActionTypes.LOAD_SCRIPTS:\r\n      try{\r\n        data.scripts.map((script) => importScripts(script));\r\n        resolve();\r\n      } catch (e) {\r\n        console.warn('@ LOAD_SCRIPTS', e);\r\n        reject(e.stack);\r\n      }\r\n      break;\r\n    case ActionTypes.REGISTER_FUNCTION:\r\n      try {\r\n        LocalFunctions[data.key] = data.fn;\r\n        resolve();\r\n      } catch (e) {\r\n        console.warn('@ REGISTER_FUNCTION', e);\r\n        reject(e.stack);\r\n      }\r\n      break;\r\n    case ActionTypes.CALL_FUNCTION:\r\n      try {\r\n        LocalFunctions[data.key].apply(self, [ resolve, reject, ...data.parameters ]);\r\n      } catch (e) {\r\n        console.warn('@ CALL_FUNCTION', e);\r\n        reject(e.stack);\r\n      }\r\n      break;\r\n    default:\r\n      console.warn('unhandled message', data);\r\n      break;\r\n  }\r\n});\r\n"]}